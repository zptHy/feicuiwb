<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
	<title>优秀作品展示</title>
	<link rel="stylesheet" href="css/common.css">
	<link rel="stylesheet" href="css/base.css">
	<link rel="stylesheet" href="css/studentswork.css">
</head>
<script>
	window.onload = function(){
		document.documentElement.style.fontSize = document.documentElement.clientWidth/7.5 +'px';
		var deviceWidth = document.documentElement.clientWidth;
		if(deviceWidth>750){
			deviceWidth = 750;
		}
		document.documentElement.style.fontSize = deviceWidth/7.5 +'px';
	};
</script>
<body>
<div class="header">
	<div class="innerContainer">
		<div class="backBtn">
			<img src="img/base/backBtn.png"/>
		</div>
		<h2 class="headerTxt">学员作品</h2>
		<div class="navBtn">
			<img class="navToShowDrop" src="img/base/navBtn.png" alt="" />
			<ul class="navDrop">
				<div class="triangle"></div>
				<!--<img class="triangle" src="img/base/triangle.png" alt="" />-->
				<li><a class="navA home" href="index.html">首页</a></li>
				<li><a class="navA aboutUs" href="aboutFeicui.html?type=aboutFeicui">关于我们</a></li>
				<li class="courseListContainer">
					<a class="navA course">课程介绍</a>
					<ul  class="courseList">
						<!--<li><a href=""></a></li>-->
					</ul>
				</li>
				<li><a class="navA teacher" href="teacher.html?type=teacher">师资团队</a></li>
				<li><a class="navA outstandingStudent" href="outstandingStudents.html?type=outstandingStudents">优秀学员</a></li>
				<li><a class="navA works" href="studentswork.html?type=studentswork">学员作品</a></li>
				<li><a class="navA firmCoperation" href="cooperation.html?type=cooperation">合作企业</a></li>
				<li class="lastLi"><a class="navA onlineRegister" href="index.html">在线报名</a></li>

			</ul>
		</div>
	</div>
</div>
	<div id="wrap">
		<ul id="container" class="clear">
			<li class="item clear">
				<a href="javascript:" class="a-img">
					<img class="lazy" src="img/studentswork/img_1.png" alt="">
				</a>
				<div class="clear s-detail">
					<div class="fl"><img class="lazy" src="img/studentswork/pho_1.png"  alt="头像"></div>
					<div class="fl">
						<div class="fl-top"><span>唐伟</span><em>UI712期</em></div>
						<div class="fl-bot"><span>Benner</span></div>
					</div>
				</div>
			</li>
			<li class="item clear">
				<a href="javascript:" class="a-img">
					<img class="lazy" src="img/studentswork/img_3.png"  alt="">
				</a>
				<div class="clear s-detail">
					<div class="fl"><img class="lazy" src="img/studentswork/pho_1.png"  alt="头像"></div>
					<div class="fl">
						<div class="fl-top"><span>唐伟</span><em>UI712期</em></div>
						<div class="fl-bot"><span>Benner</span></div>
					</div>
				</div>
			</li>
			<li class="item clear">
				<a href="javascript:" class="a-img">
					<img class="lazy" src="img/studentswork/img_2.png"  alt="">
				</a>
				<div class="clear s-detail">
					<div class="fl"><img class="lazy" src="img/studentswork/pho_1.png" " alt="头像"></div>
					<div class="fl">
						<div class="fl-top"><span>唐伟</span><em>UI712期</em></div>
						<div class="fl-bot"><span>Benner</span></div>
					</div>
				</div>
			</li>
			<li class="item clear">
				<a href="javascript:" class="a-img">
					<img class="lazy" src="img/studentswork/img_1.png"  alt="">
				</a>
				<div class="clear s-detail">
					<div class="fl"><img class="lazy" src="img/studentswork/pho_1.png"  alt="头像"></div>
					<div class="fl">
						<div class="fl-top"><span>唐伟</span><em>UI712期</em></div>
						<div class="fl-bot"><span>Benner</span></div>
					</div>
				</div>
			</li>
			<li class="item clear">
				<a href="javascript:" class="a-img">
					<img class="lazy" src="img/studentswork/img_3.png"  alt="">
				</a>
				<div class="clear s-detail">
					<div class="fl"><img class="lazy" src="img/studentswork/pho_1.png"  alt="头像"></div>
					<div class="fl">
						<div class="fl-top"><span>唐伟</span><em>UI712期</em></div>
						<div class="fl-bot"><span>Benner</span></div>
					</div>
				</div>
			</li>
		</ul>
		<!--加载进度按钮-->
		<div id="imloading" style="margin-top: 0.5rem;">作品加载中.....</div>
	</div>

<div class="footer">
	<div class="innerContainer">
		<ul class="footerNav">
			<li><a href="aboutFeicui.html">关于我们</a></li>
			<li><a href="javascript:void(0);">联系我们</a></li>
			<li><a href="../front/index.html">网页版</a></li>
		</ul>
		<div class="footerLogoAndPhone">
			<img class="logo" src="img/base/logo.png" alt="" />
			<div class="phoneAndAddress">
				<div class="tel"></div>
				<div class="address"></div>
			</div>
		</div>

	</div>
	<div class="copyRight">opyright © 2005-2020 翡翠教育科技有限公司 All Rights Reserved 京ICP备12036804号-23</div>
</div>
</body>
</html>
<script charset="UTF-8" type="text/javascript" src="lib/js/jquery-3.0.0.js"></script>
<script charset="UTF-8" type="text/javascript" src="lib/js/jquery.masonry.min.js"></script>
<script charset="UTF-8" type="text/javascript" src="img/studentswork/imagesloaded.pkgd.min.js"></script>
<script charset="UTF-8" type="text/javascript" src="lib/js/lazyload.js"></script>
<script>
$(function(){
	var container = $("#container");
	var loading = $("#imloading");
	var Contain = document.getElementById("container");
	var oLi = Contain.getElementsByTagName("li");
	loading.data("on",true);
	container.imagesLoaded(function() {
		f_masonry();
	});

	function f_masonry() {
		$("#container").masonry({
			itemSelector:'.item',
			isRTL: false,
			isResizable: true,
			animationOptions: {
				duration: 800,
				queue: false
			}
		})
	};
	$.ajax({
		type:"get",
		url:"../json/homeWorkInfo.json",
		cache:true,
		dataType:"json",
		beforeSend:function(){
			console.log("123 开始")
		},
		success:function(res){
			var data = res.data;
//			console.log(data);
			var data1=[];
			$(window).scroll(function(){
				if(!loading.data("on")) return;
				var itemNum =$(".item").length;
				// console.log(itemNum);
				var itemArr=[];
				itemArr[0]=$(".item").eq(itemNum-1).offset().top+$(".item").eq(itemNum-1)[0].offsetHeight;
				itemArr[1]=$(".item").eq(itemNum-2).offset().top+$(".item").eq(itemNum-1)[0].offsetHeight;
//				itemArr[2]=$(".item").eq(itemNum-3).offset().top+$(".item").eq(itemNum-1)[0].offsetHeight;
				var maxTop=Math.max.apply(null,itemArr);
				num = oLi.length -5;
				if(maxTop<($(window).height()+$(document).scrollTop())){
					for (var i=num;i<num+3;i++){
						if(i>=data.length){
							break;
						}else{
							data1.push(data[i]);
							console.log(data1)
						}
					}
					console.log(data1);
					//加载更多数据
					loading.data("on",false).fadeIn(800);
					if(itemNum>=data.length+5){
						loading.text('全部加载完毕！');
					}else {
						var html = "";
						for (var i in data1) {
							html += '<li class="item clear"><a href="javascript:" class="a-img"><img    src=../upload/' + data1[i].imgMobile + ' alt=""></a><div class="clear s-detail"><div class="fl"><img    src=../upload/' + data1[i].avatarMobile + ' alt="头像"></div><div class="fl"><div class="fl-top"><span>' + data1[i].stuName + '</span><em>' + data1[i].classInfo + '</em></div><div class="fl-bot"><span>' + data1[i].type + '</span></div></div></div></li>';
						}
//						清空
						data1 = [];
						var time=setTimeout(function(){
							var $newElems = $(html).css({ opacity: 0}).appendTo(container);
							container.imagesLoaded(function() {
								$newElems.animate({opacity: 1}, 800);
								container.masonry('appended', $newElems, true);
								loading.data("on", true).fadeOut();
								clearTimeout(time);
							});
						},800)
					}
				}
			})
		}
	})

})
</script>
<script src="js/base.js"></script>
